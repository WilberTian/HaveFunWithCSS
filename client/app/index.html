<!DOCTYPE html>
<html>
    <head>
      <title>FunWithCSS</title>
      <link rel="stylesheet" href="/vendor/semantic-ui/semantic.min.css">
     
      <link rel="stylesheet" href="/app/styles/index.css" />
      <link rel="stylesheet" href="/vendor/codemirror/css/codemirror.min.css" rel="stylesheet" />
      <link rel="stylesheet" href="/vendor/codemirror/css/twilight.min.css" rel="stylesheet" />
    </head>

    <body>
      <div id="app-container">
        <div class="ui top attached menu">
            <div id="index-menu" class="right menu">
              <div class="item">
                <div class="ui icon input">
                  <input id="fun-filter" type="text" placeholder="Search...">
                  <i class="search icon"></i>
                </div>
              </div>
              <a id="open-modal-btn" class="item"/><i class="plus icon"></i>Add</a>
            </div>

            <div id="fun-item-selector" class="menu">
            </div>

            <div id="fun-item-operations" class="right menu">
              <li class="item">
                <div id="fun-item-operations" class="ui mini buttons">
                  <button class="ui basic blue button try-it">
                    <i class="play icon"></i>
                    Run
                  </button>
                  <button class="ui basic green button update">
                    <i class="save icon"></i>
                    Save
                  </button>
                  <button class="ui basic red button delete">
                    <i class="remove icon"></i>
                    Delete
                  </button>
                  <a class="ui basic teal button" href="apis/external/<%- folder %>/<%- name %>" target="_blank">
                      <i class="external icon"></i>
                      External
                  </a>
                </div>
              </li>
            </div>
        </div>

        <div class="ui bottom attached segment" id="app-content">
          <div class="ui cards" id="fun-group-list">
          </div>

          <div id="shield" style="display: none;"></div>
          <div id="main-space">
            <a id="dragbar">
              <img src="/app/images/resize.png"></img>
            </a>
            <textarea id="editor" disabled></textarea>
            <iframe id="viewer"></iframe>
          </div>

        </div>

        <div id="fun-item-modal" class="ui modal">
        </div>
        <div id="confirm-modal" class="ui basic modal">
        </div>
        <div id="notification-area">
        </div>
      </div>
    </body>
    
    <script type="text/javascript" src="/vendor/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/vendor/json2/json2.min.js"></script>
    <script type="text/javascript" src="/vendor/underscore/underscore.min.js"></script>
    <script type="text/javascript" src="/vendor/backbone/backbone-min.js"></script>
    <script type="text/javascript" src="/vendor/codemirror/js/codemirror.min.js"></script>
    <script src="/vendor/codemirror/js/htmlmixed.min.js"></script>
    <script src="/vendor/codemirror/js/css.min.js"></script>
    <script src="/vendor/codemirror/js/javascript.min.js"></script>
    <script src="/vendor/codemirror/js/xml.min.js"></script>
    <script src="/vendor/semantic-ui/semantic.min.js"></script>

    <script type="text/javascript" src="/app/javascripts/resize.js"></script>
    <script type="text/javascript" src="/app/javascripts/fun.js"></script>
    
    
    <script type="text/javascript">
      var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
        lineNumbers: true,
        mode: "htmlmixed",
        theme: "twilight"
        // readOnly: "nocursor"
      });

      editor.setSize("100%", "50%")
    </script>

    <script type="text/template" id="fun-item-selector-template">
      <li class="item">
        <a href="/"><i class="grid layout icon"></i></a>
      </li> 
      <li class="item">
        <div class="ui green label"><%- folder %></div>
      </li>
      <li class="item">
        <div class="ui selection dropdown">
          <input id="selectedFunItemName" name="funItemName" type="hidden" value="<%- name %>">
          <i class="dropdown icon"></i>
          <div class="text"><%- name %></div>
          <div class="menu">
              <% _.each(funItems, function(funItem) { %> 
                  <div class="item" data-value="<%= funItem.path %>"><%= funItem.name %></div>
              <% }); %>
          </div>
        </div>
      </li>
    </script>
    
    <script type="text/template" id="fun-item-template">
      <div class="fun-group-item">
          <span><%- name %></span>
      </div>
    </script>

    <script type="text/template" id="fun-group-template">
      <div class="card">
        <div class="content">
          <div class="header">
            <%- folder %>
            <div class="floating ui blue circular label"><%- funItemNum %></div> 
          </div>
          <div class="description">
            
          </div>
        </div>
        <div id="open-modal-btn" class="ui teal bottom attached button" data-funfolder="<%- folder %>">
          <i class="add icon"></i>
          Add
        </div>
      </div>
    </script>

    <script type="text/template" id="fun-item-modal-template">
      <div class="header">
          Add fun item:       
      </div>
      <div class="content">
          <form class="ui form error">
            <div class="field">
              <label>Folder</label>
              <input id="fun-folder-in-modal" type="text" name="funFolder" placeholder="FunItem folder" value="<%- funFolder %>"></input>
            </div>
            <div class="field">
              <label>Name</label>
              <input id="fun-name-in-modal" type="text" name="funItem" placeholder="FunItem name"></input>
            </div>
            <div id="error-msg" class="ui error message">
              <div class="header">Action Forbidden</div>
              <p></P>
            </div>
          </form>
      </div>
      <div class="actions">
          <div id="create-fun-item-btn" class="ui blue right labeled icon button">
              Save
              <i class="checkmark icon"></i>
          </div>
          <div id="close-modal-btn" class="ui red button" >
              Cancel
          </div>
      </div>
    </script>

    <script type="text/template" id="confirm-modal-template">
      <div class="ui icon header">
        <i class="archive icon"></i>
        Delete fun item!
      </div>
      <div class="content">
        <p>Sure you want to delete <%- name %>?</p>
      </div>
      <div class="actions">
        <div class="ui red basic cancel inverted button" id="close-confirm-modal-btn">
          <i class="remove icon"></i>
          No
        </div>
        <div class="ui green ok inverted button" id="delete-fun-item-btn">
          <i class="checkmark icon"></i>
          Yes
        </div>
      </div>
    </script>

    <script type="text/template" id="notification-template">
      <div class="notification">
        <%- message %>
      </div>
    </script>
</html>
